window.global||(window.global=window),function(_g){"use strict";var _u=void 0,_tally=null,fcipher=function(){function _utf8ToBinary(n,off,len){var c,lst=[],cnt=0;len+=off;for(var i=off;i<len;i++)(c=0|n.charCodeAt(i))<128?lst[cnt++]=0|c:(127<c&&c<2048?lst[cnt++]=c>>6|192:(lst[cnt++]=c>>12|224,lst[cnt++]=c>>6&63|128),lst[cnt++]=63&c|128);return lst}function _binaryToUTF8(n,off,len){var c,ret="";len+=off;for(var i=off;i<len;i++)(c=255&n[i])<128?ret+=String.fromCharCode(c):191<c&&c<224?(ret+=String.fromCharCode((31&c)<<6|63&n[i+1]),i+=1):(ret+=String.fromCharCode((15&c)<<12|(63&n[i+1])<<6|63&n[i+2]),i+=2);return ret}function _Xor128(seet){var r={v:{a:123456789,b:362436069,c:521288629,d:88675123},setSeet:function(s){if(_isNumeric(s)){var n=this.v;s|=0,n.a=s=1812433253*(s^s>>30)+1,n.b=s=1812433253*(s^s>>30)+2,n.c=s=1812433253*(s^s>>30)+3,n.d=s=1812433253*(s^s>>30)+4}},next:function(){var n=this.v,t=n.a,r=t;return t<<=11,r=t^=r,t^=r>>=8,r=n.b,n.a=r,r=n.c,n.b=r,r=n.d,t^=n.c=r,r>>=19,r^=t,n.d=r},nextInt:function(){return this.next()}};return r.setSeet(seet),r}function _flip(pause,step){switch(7&step){case 1:return 255&((3&pause)<<6&192|(252&pause)>>2&63);case 2:return 255&((63&pause)<<2&252|(192&pause)>>6&3);case 3:return 255&((1&pause)<<7&128|(254&pause)>>1&127);case 4:return 255&((15&pause)<<4&240|(240&pause)>>4&15);case 5:return 255&((127&pause)<<1&254|(128&pause)>>7&1);case 6:return 255&((7&pause)<<5&224|(248&pause)>>3&31);case 7:return 255&((31&pause)<<3&248|(224&pause)>>5&7)}return 255&pause}function _nflip(pause,step){switch(7&step){case 1:return 255&((63&pause)<<2&252|(192&pause)>>6&3);case 2:return 255&((3&pause)<<6&192|(252&pause)>>2&63);case 3:return 255&((127&pause)<<1&254|(128&pause)>>7&1);case 4:return 255&((15&pause)<<4&240|(240&pause)>>4&15);case 5:return 255&((1&pause)<<7&128|(254&pause)>>1&127);case 6:return 255&((31&pause)<<3&248|(224&pause)>>5&7);case 7:return 255&((7&pause)<<5&224|(248&pause)>>3&31)}return 255&pause}function _z2(n){return"00".substring(n.length)+n}function fhash(code,uuidFlg){var o=null,n=[1518500249,1859775393,2400959708,3395469782];"string"==typeof code&&(code=_utf8ToBinary(code,0,code.length));for(var len=code.length,i=0;i<len;i++)o=1==(1&(o=255&code[i]))?_flip(o,o):_nflip(o,o),1==(1&i)?(n[0]=n[0]+o,n[1]=n[1]-(o<<8),n[2]=n[2]+(o<<16),n[3]=n[3]-(o<<24),n[3]=n[3]^o,n[2]=n[2]^o<<8,n[1]=n[1]^o<<16,n[0]=n[0]^o<<24,n[0]=n[3]+1+n[0],n[1]=n[2]-1+n[1],n[2]=n[1]+1+n[2],n[3]=n[0]-1+n[3]):(n[3]=n[3]+o,n[2]=n[2]-(o<<8),n[1]=n[1]+(o<<16),n[0]=n[0]-(o<<24),n[0]=n[0]^o,n[1]=n[1]^o<<8,n[2]=n[2]^o<<16,n[3]=n[3]^o<<24,n[0]=n[3]+1-n[0],n[1]=n[2]-1-n[1],n[2]=n[1]+1-n[2],n[3]=n[0]-1-n[3]),n[3]=n[0]+1^~n[3],n[2]=n[1]-1^~n[2],n[1]=n[2]+1^~n[1],n[0]=n[3]-1^~n[0];return 0!=uuidFlg?function(n){var a=n[0],b=n[1],c=n[2],d=n[3];return _z2(((4278190080&a)>>24&255).toString(16))+_z2(((16711680&a)>>16).toString(16))+_z2(((65280&a)>>8).toString(16))+_z2((255&a).toString(16))+"-"+_z2(((4278190080&b)>>24&255).toString(16))+_z2(((16711680&b)>>16).toString(16))+"-"+_z2(((65280&b)>>8).toString(16))+_z2((255&b).toString(16))+"-"+_z2(((4278190080&c)>>24&255).toString(16))+_z2(((16711680&c)>>16).toString(16))+"-"+_z2(((65280&c)>>8).toString(16))+_z2((255&c).toString(16))+_z2(((4278190080&d)>>24&255).toString(16))+_z2(((16711680&d)>>16).toString(16))+_z2(((65280&d)>>8).toString(16))+_z2((255&d).toString(16))}(n):[255&n[0],(65280&n[0])>>8,(16711680&n[0])>>16,(4278190080&n[0])>>24&255,255&n[1],(65280&n[1])>>8,(16711680&n[1])>>16,(4278190080&n[1])>>24&255,255&n[2],(65280&n[2])>>8,(16711680&n[2])>>16,(4278190080&n[2])>>24&255,255&n[3],(65280&n[3])>>8,(16711680&n[3])>>16,(4278190080&n[3])>>24&255]}var o,ENC_CD,DEC_CD,_IS_NUMERIC_REG,CBase64=(o={},ENC_CD="0123456789+abcdefghijklmnopqrstuvwxyz/ABCDEFGHIJKLMNOPQRSTUVWXYZ",DEC_CD=function(){for(var src=ENC_CD,ret={},len=src.length,i=0;i<len;i++)ret[src[i]]=i;return ret}(),o.encode=function(bin){var i,j,k,allLen=allLen=bin.length,etc=allLen%3|0,len=allLen/3|0,ary=new Array(4*len+(0!=etc?4:0));for(k=j=i=0;i<len;i++,j+=3,k+=4)ary[k]=ENC_CD[(252&bin[j])>>2],ary[k+1]=ENC_CD[(3&bin[j])<<4|(240&bin[j+1])>>4],ary[k+2]=ENC_CD[(15&bin[j+1])<<2|(192&bin[j+2])>>6],ary[k+3]=ENC_CD[63&bin[j+2]];switch(etc){case 1:j=3*len,ary[k=4*len]=ENC_CD[(252&bin[j])>>2],ary[k+1]=ENC_CD[(3&bin[j])<<4],ary[k+2]="=",ary[k+3]="=";break;case 2:j=3*len,ary[k=4*len]=ENC_CD[(252&bin[j])>>2],ary[k+1]=ENC_CD[(3&bin[j])<<4|(240&bin[j+1])>>4],ary[k+2]=ENC_CD[(15&bin[j+1])<<2],ary[k+3]="="}return ary.join("")},o.decode=function(base64){var i,j,k,allLen=base64.length,etc=0;for(i=allLen-1;0<=i&&"="==base64.charAt(i);i--)etc++;var len=allLen/4|0,ret=new Uint8Array(3*len-etc);for(len-=1,k=j=i=0;i<len;i++,j+=4,k+=3)ret[k]=(63&DEC_CD[base64[j]])<<2|(48&DEC_CD[base64[j+1]])>>4,ret[k+1]=(15&DEC_CD[base64[j+1]])<<4|(60&DEC_CD[base64[j+2]])>>2,ret[k+2]=(3&DEC_CD[base64[j+2]])<<6|63&DEC_CD[base64[j+3]];switch(etc){case 0:j=4*len,ret[k=3*len]=(63&DEC_CD[base64[j]])<<2|(48&DEC_CD[base64[j+1]])>>4,ret[k+1]=(15&DEC_CD[base64[j+1]])<<4|(60&DEC_CD[base64[j+2]])>>2,ret[k+2]=(3&DEC_CD[base64[j+2]])<<6|63&DEC_CD[base64[j+3]];break;case 1:j=4*len,ret[k=3*len]=(63&DEC_CD[base64[j]])<<2|(48&DEC_CD[base64[j+1]])>>4,ret[k+1]=(15&DEC_CD[base64[j+1]])<<4|(60&DEC_CD[base64[j+2]])>>2;break;case 2:j=4*len,ret[k=3*len]=(63&DEC_CD[base64[j]])<<2|(48&DEC_CD[base64[j+1]])>>4}return ret},o),_isNumeric=(_IS_NUMERIC_REG=/[^0-9.0-9]/g,function(num){var n=""+num;return!(null==num||num==_u||"number"!=typeof num&&(0==n.indexOf("-")&&(n=n.substring(1)),0==n.length||n.match(_IS_NUMERIC_REG)||1<function(off,src,value){for(var p,ret=0;-1!=(p=src.indexOf(value,off));)ret++,off=p+value.length;return ret}(0,n,".")))}),tally=function(){var _CODE=[59,95,36,58,37,47,38,46,61,42,44,45,126,35,94,64],_HEAD=64,_CHECK=33,_APPEND_CHECK=124,rand=_Xor128((new Date).getTime()+1);!function(){for(var n="",_x=function(a){return String.fromCharCode(a)},i=0;i<_CODE.length;i++)n+=_x(_CODE[i]);_CODE=n,_HEAD=_x(_HEAD),_CHECK=_x(_CHECK),_APPEND_CHECK=_x(_APPEND_CHECK)}();var o={enc:function(value,check){var j,n,m,c,t;"string"==typeof check&&0<check.length&&(value+=_CHECK+fhash(check));var len=(value=_utf8ToBinary(value,0,value.length)).length,allLen=2+(len<<1),v=new Array(allLen);m=255,v[0]=rand.nextInt()&m;for(var i=0;i<len;i++)v[1+(i<<1)]=value[i],v[2+(i<<1)]=rand.nextInt()&m;for(v[allLen-1]=rand.nextInt()&m,len=allLen-1,t=i=0;i<len;i+=2)for(n=v[i],!1&t++&&(n=~n),j=i+1;j<len;j+=2)v[j]=(v[j]^n)&m;for(n=v[0],i=1;i<len;i++)v[i]=(!1&i?v[i]^n:v[i]^~n)&m;for(n=v[len],i=len-1;0<=i;i--)v[i]=(!1&i?v[i]^~n:v[i]^n)&m;c=_CODE;var buf="";for(i=0;i<allLen;i++)for(n=v[i],j=0;j<2;j++)buf+=c.charAt((n&15<<(j<<2))>>(j<<2));return"string"==typeof check&&0<check.length?_HEAD+buf+_APPEND_CHECK:_HEAD+buf},dec:function(value,check){var useCheck=!1,ret=null;try{if(!("string"==typeof value&&0<value.length)||value.charAt(0)!=_HEAD||!1&value.length)return null;var i,j,k,a,b,c,m,n,t;value[value.length-1]==_APPEND_CHECK&&(useCheck=!0,value=value.substring(0,value.length-1));var len=value.length,v=new Array(len-1>>1);for(m=255,c=_CODE,i=1,k=0;i<len;i+=2){if(a=c.indexOf(value.charAt(i)),b=c.indexOf(value.charAt(i+1)),-1==a||-1==b)return null;v[k++]=(a|b<<4)&m}for(n=v[len=v.length-1],i=len-1;0<=i;i--)v[i]=(!1&i?v[i]^~n:v[i]^n)&m;for(n=v[0],i=1;i<len;i++)v[i]=(!1&i?v[i]^n:v[i]^~n)&m;for(t=i=0;i<len;i+=2)for(n=v[i],!1&t++&&(n=~n),j=i+1;j<len;j+=2)v[j]=(v[j]^n)&m;var cnt=0,vv=new Array((len>>1)-1);for(i=1;i<len;i+=2)vv[cnt++]=v[i];ret=_binaryToUTF8(vv,0,vv.length)}catch(e){throw new Error("Analysis failed.")}if("string"==typeof check&&0<check.length){check=fhash(check);var p=ret.lastIndexOf(_CHECK+check);if(-1==p||ret.length-p!=check.length+1)throw new Error("Check codes do not match.");return ret.substring(0,ret.length-(check.length+1))}if(useCheck)throw new Error("Analysis failed.");return ret}};return o}();_tally=tally;var fcipher={},_head=null,rand=_Xor128((new Date).getTime());fcipher.fhash=fhash,fcipher.head=function(h){_head=h},fcipher.key=function(word,src){src!=_u&&null!=src||(src="-l_l-u_f-s_m-");for(var srcBin=code16(src,1),wordBin=code16(word,1),ret=srcBin.concat(wordBin),i=0;i<16;i++)ret[i]=_convert(ret,i,wordBin[i]);i=15;for(var j=0;0<=i;i--,j++)ret[i+16]=_convert(ret,i+16,srcBin[j]);return ret},fcipher.enc=function(value,pKey,head){return value=""+value,fcipher.benc(_utf8ToBinary(value,0,value.length),pKey,head)},fcipher.benc=function(bin,pKey,head){head=null==head||head==_u?null==_head?"":_head:head;var pubKey=_randKey(),key32=_convertKey(pKey,pubKey),key256=_key256(key32);key32=null;var stepNo=127&_getStepNo(pKey,bin),nowStep=_convert256To(key256,pubKey,stepNo);_ed(!0,bin,key256,nowStep);var eb=new Uint8Array(34+bin.length);return eb[0]=255&rand.nextInt(),eb[1]=~(stepNo^eb[0]),arraycopy(pubKey,0,eb,2,32),arraycopy(bin,0,eb,34,bin.length),head+CBase64.encode(eb)},fcipher.dec=function(value,pKey,head){value=fcipher.bdec(value,pKey,head);return _binaryToUTF8(value,0,value)},fcipher.bdec=function(value,pKey,head){head=null==head||head==_u?null==_head?"":_head:head;var bin=CBase64.decode(value.substring(""+head.length));if(bin.length<=34)throw new Error("decode:Invalid binary length.");var stepNo=127&~(bin[1]^bin[0]),pubKey=new Uint8Array(32);arraycopy(bin,2,pubKey,0,32);var bodyLen=bin.length-34,body=new Uint8Array(bodyLen);arraycopy(bin,34,body,0,bodyLen),bin=null;var key32=_convertKey(pKey,pubKey),key256=_key256(key32);key32=null;var nowStep=_convert256To(key256,pubKey,stepNo);if(_ed(!1,body,key256,nowStep),(127&_getStepNo(pKey,body))!=stepNo)throw new Error("decode:Decryption process failed.");return body};var _randKey=function(){for(var bin=new Uint8Array(32),i=0;i<32;i++)bin[i]=255&rand.next();return bin},code16=function(s,mode){var n,ret=1==mode?[177,75,163,143,73,49,207,40,87,41,169,91,184,67,254,89]:[87,41,169,91,184,67,254,89,177,75,163,143,73,49,207,40],len=s.length;mode|=0;for(var i=0;i<len;i++)if(n=16777215&(1==mode?0|s.charCodeAt(i):0|s[i]),0==(1&i)){for(var j=0;j<16;j+=2)ret[j]=ret[j]^n-(i+j);for(j=1;j<16;j+=1)ret[j]=ret[j]^~(n-(i+j))}else{for(j=1;j<16;j+=1)ret[j]=ret[j]^n-(i+j);for(j=0;j<16;j+=2)ret[j]=ret[j]^~(n-(i+j))}for(i=0;i<16;i++)ret[i]=255&ret[i];return ret},_convert=function(key,no,pause){switch(1&no){case 0:return 255&(pause^key[no]);case 1:return 255&~(pause^key[no])}return 0},_convertKey=function(pKey,key){for(var low=code16(pKey,0),hight=code16(key,0),ret=new Uint8Array(32),i=0,j=0,k=15;i<16;i++,j+=2,k--)ret[j]=_convert(low,i,key[j]),ret[j+1]=_convert(hight,i,low[k]);return ret},_key256=function(key32){for(var o,s,e,ret=new Uint8Array(256),b=new Uint8Array(4),n=0,i=0,j=0;i<31;i+=2,j+=16)s=255&key32[i],e=255&key32[i+1],0!=(1&n)?n+=s^~e:n-=~s^e,b[0]=255&n,b[1]=(65280&n)>>8&255,b[2]=(16711680&n)>>16&255,b[3]=(4278190080&n)>>24&255,o=code16(b,0),arraycopy(o,0,ret,j,16);return ret},_getStepNo=function(pubKey,binary){var i,j,bin,ret=0,len=binary.length,addCd=1+(3&pubKey[31&binary[len>>1]]);for(j=i=0;i<len;i+=addCd,j+=addCd)ret=(1&(bin=255&~binary[i]))+((2&bin)>>1)+((4&bin)>>2)+((8&bin)>>3)+((16&bin)>>4)+((32&bin)>>5)+((64&bin)>>6)+((128&bin)>>7)+(255&j)+ret;if(0==(1&ret))for(i=0;i<32;i++)ret+=(1&(bin=0==(1&pubKey[i])?255&~pubKey[i]:255&pubKey[i]))+((2&bin)>>1)+((4&bin)>>2)+((8&bin)>>3)+((16&bin)>>4)+((32&bin)>>5)+((64&bin)>>6)+((128&bin)>>7);else for(i=0;i<32;i++)ret-=(1&(bin=0==(1&pubKey[i])?255&~pubKey[i]:255&pubKey[i]))+((2&bin)>>1)+((4&bin)>>2)+((8&bin)>>3)+((16&bin)>>4)+((32&bin)>>5)+((64&bin)>>6)+((128&bin)>>7);return 255&~ret},_convert256To=function(key256,pKey,step){for(var ns=step,i=0,j=0;i<256;i++,j=j+1&31)0==(1&(ns^=~key256[i]))&&(ns=~ns),key256[i]=_convert(pKey,j,key256[i]),key256[i]=_flip(key256[i],ns);return ns},_ed=function(mode,binary,key256,step){var len=binary.length,ns=step;if(mode)for(var i=0,j=0;i<len;i++,j=j+1&255)0!=(1&(ns^=~key256[j]))&&(ns=~ns),binary[i]=_convert(key256,j,binary[i]),binary[i]=_flip(binary[i],ns);else for(i=0,j=0;i<len;i++,j=j+1&255)0!=(1&(ns^=~key256[j]))&&(ns=~ns),binary[i]=_nflip(binary[i],ns),binary[i]=_convert(key256,j,binary[i])},arraycopy=function(s,sp,d,dp,len){len|=0,sp|=0,dp|=0;for(var i=0;i<len;i++)d[dp+i]=s[sp+i]};return fcipher}(),_ajax=function(method,url,params,func,errFunc,noCache,header){errFunc="function"!=typeof errFunc?func:errFunc,method=(method+"").toUpperCase(),1!=noCache&&(url+=(-1==url.indexOf("?")?"?":"&")+(new Date).getTime());var pms="";if(params)if("string"==typeof params||params instanceof Blob||params instanceof File||params instanceof Uint8Array||params instanceof ArrayBuffer)pms=params;else{var cnt=0;for(var k in params)0!=cnt&&(pms+="&"),pms+=k+"="+encodeURIComponent(params[k]),cnt++}if("GET"==method&&(url+=pms,pms=null),func==_u){var x;(x=new XMLHttpRequest).open(_m(method),url,!1),head(method,x,header),x.send(pms);var state=x.status;0==state&&(state=500);var ret=x.responseText;if(x.abort(),state<300)return ret;throw new Error("response status:"+state+" error")}(x=new XMLHttpRequest).open(_m(method),url,!0),x.onload=function(){if(4==x.readyState)try{var status=x.status;status&&0!=status||(status=500),status<300?func(status,x.responseText):errFunc(status,x.responseText)}finally{x.abort(),errFunc=func=x=null}},x.onerror=function(){var status=x.status;status&&0!=status||(status=500);try{errFunc(status,x.responseText)}finally{x.abort(),errFunc=func=x=null}},head(method,x,header),x.send(pms)};function head(m,x,h){if(h["Content-Type"]||("POST"==m?x.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"JSON"==m&&x.setRequestHeader("Content-Type","application/json")),h)for(var k in h)"Content-Length"!=k&&x.setRequestHeader(k,h[k])}function _m(m){return"JSON"==m?"POST":m}function _getUrl(url,head){return url&&""!=url?0==url.indexOf("http://")||0==url.indexOf("https://")?url:(0!=url.indexOf("/")&&(url="/"+url),head&&""!=head?void 0:DEF_HEAD_URL+url):null}function _sendGet(url,execType,header,params,noCache,timeout,result,errorResult){url&&""!=url||(url="/"),url=_getUrl(url),noCache||(noCache=!1),header["X-Cbox-Execute-Type"]=execType,header["X-Cbox-Execute-Timeout"]=timeout?""+timeout:"",_ajax("GET",url,params,result,errorResult,noCache,header)}function _sendUaccess(url,execType,header,params,noCache,timeout,result,errorResult){url&&""!=url||(url="/"),url=_getUrl(url),noCache||(noCache=!1),header["x-uaccess-type"]=execType,header["x-uaccess-timeout"]=timeout?""+timeout:"",header["x-uaccess-params"]=params||"",_ajax("GET",url,null,result,errorResult,noCache,header)}function _getAuthHeader(expire){var ret={};return ret[_UACCESS_SIGNATURES]=_createAuthAccountCode(expire),ret}var DEF_HEAD_URL=location.protocol+"//"+location.host,_TALLY_CODE=_tally.dec("@&;,__::#.$;;%#,:%=;&%$&*^-%~^%^.^=*;;$/~%-&="),_UACCESS_ADMIN_ACCESS_CODE_KEYCODE=_tally.dec("@/.;:/^:$;-/&$%&#&~_^%_/.=~:;$.*@_~$-^&;.:;%~.:$&#^:;*;###~_#*^%^_.@&,;@~.%&%:.,^$#$@#&^&=*;&,/:~_&~.&_.-@,$=__/&^^@.~,~_//:*/%^/#$-@.$:;;^~:#:==:,%,~*#,_*#,-:=%*$#^@$=%-=;;$_~=^:*:;*-$/#/.;$:~.%$_.,@:;=;:%$^*%:*:&/^@-&__.^..@^*_@./-@$.%@_%##~/~^%/;:~@_;$/-@,;*-@;*|",_TALLY_CODE),_UACCESS_ADMIN_CODE_KEYCODE=_tally.dec("@%_%^,.*;%%,#$-=@/;#&.~-%-_@=&*;@&~##~^~@**:-&%/;^,&%.=..%=:/$:~#$~_*@;./~~;.,%$=-~.^#&,/@_%*@_-%/_*,_&;/&**.$..-_^#,;^,#=~.=*_;:/_^*=&@__..=;,***,^=^;=&^$=,@%:__@$_*;%,*@;-#_&%:_.@$-,-.$..*=#_#@,;@~$:=,#&.;_=:~~,#@,-:,-^=-:,:@/-~_*%,%:^$%:_:#~./@%&*/;=.#=-@-@-;/%;*_&@__%%|",_TALLY_CODE),o={setUAccessExpire:function(expire){1e3<=(expire|=0)&&(_uaccessExpire=expire)},getUAccessExpire:function(){return _uaccessExpire}},_UACCESS_SIGNATURES="x-uaccess-signatures",_uaccessAccountName="a",_uaccessAccountCode="b",_uaccessSecurityCode="c",_uaccessExpire=6e4,_createAuthAccountCode=function(expire){(expire|=0)<=0&&(expire=_uaccessExpire);var key=fcipher.key(_uaccessAccountCode,_uaccessAccountName),src='{"securityCode": "'+_uaccessSecurityCode+'", "expire": '+(Date.now()+expire)+"}";return fcipher.enc(src,key,"_uaccess_user_account_")};o.setAuthInfo=function(name,accountCode,securityCode){!function(name,accountCode,securityCode){_uaccessAccountName=name,_uaccessAccountCode=accountCode,_uaccessSecurityCode=securityCode}(name,accountCode,securityCode)};function _setExpireHeaders(headers,expire){return(expire|=0)<=0&&(expire=-1),headers[_CBOX_FILE_EXPIRE]=""+expire,headers}var _CBOX_FILE_EXPIRE="x-cbox-file-expire";o.createFolder=function(url,result,errorResult,noCache,timeout){_sendGet(url,"create-folder",_getAuthHeader(),null,noCache,timeout,result,errorResult)},o.removeFolder=function(url,result,errorResult,noCache,timeout){_sendGet(url,"remove-folder",_getAuthHeader(),null,noCache,timeout,result,errorResult)},o.updateFile=function(url,value,expire,result,errorResult,noCache,timeout){!function(url,execType,header,value,noCache,timeout,result,errorResult){url&&""!=url||(url="/"),(url=_getUrl(url)).lastIndexOf("/")==url.length-1?url+=value.name:url+="/"+value.name,noCache||(noCache=!1),header["X-Cbox-Execute-Type"]=execType,header["X-Cbox-Execute-Timeout"]=timeout?""+timeout:"",header["Content-Type"]=value.type,header["Content-Length"]=value.size,_ajax("POST",url,value,result,errorResult,noCache,header)}(url,"create-file",_setExpireHeaders(_getAuthHeader(),expire),value,noCache,timeout,result,errorResult)},o.updateData=function(url,value,expire,result,errorResult,noCache,timeout){!function(url,execType,header,value,noCache,timeout,result,errorResult){url&&""!=url||(url="/");var mimeType=function(name){var p=name.lastIndexOf(".");if(-1==p)return"application/octet-stream";switch(name.substring(p+1)){case"htm":case"html":return"text/html; charset=utf-8;";case"xhtml":case"xht":return"application/xhtml+xml; charset=utf-8;";case"js":return"text/javascript; charset=utf-8;";case"css":return"text/css; charset=utf-8;";case"rtf":return"text/rtf";case"tsv":return"text/tab-separated-values";case"gif":return"image/gif";case"jpg":case"jpeg":return"image/jpeg";case"png":return"image/png";case"svg":return"image/svg+xml";case"rss":case"xml":case"xsl":return"application/xml";case"pdf":return"application/pdf";case"doc":return"application/msword";case"xls":return"application/vnd.ms-excel";case"ppt":return"application/vnd.ms-powerpoint";case"docx":return"application/vnd.openxmlformats-officedocument.wordprocessingml.document docx";case"xlsx":return"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet xlsx";case"pptx":return"application/vnd.openxmlformats-officedocument.presentationml.presentation pptx";case"dtd":return"application/xml-dtd";case"sh":return"application/x-sh";case"tar":return"application/x-tar";case"zip":return"application/zip";case"jar":return"application/java-archive";case"swf":return"application/x-shockwave-flash";case"mpga":case"mp2":case"mp3":return"audio/mpeg";case"wma":return"audio/x-ms-wma";case"wav":return"audio/x-wav";case"3gp":return"video/3gpp";case"3g2":return"video/3gpp2";case"mpeg":case"mpg":case"mpe":return"video/mpeg";case"qt":case"mov":return"video/quicktime";case"mxu":case"m4u":return"video/vnd.mpegurl";case"asf":case"asx":return"video/x-ms-asf";case"avi":return"video/x-msvideo";case"wmv":return"video/x-ms-wmv";case"flv":return"video/x-flv";case"ogg":return"application/ogg";case"mpg4":return"video/mp4";case"ico":return"image/x-icon"}return"application/octet-stream"}(url=_getUrl(url));noCache||(noCache=!1),header["X-Cbox-Execute-Type"]=execType,header["X-Cbox-Execute-Timeout"]=timeout?""+timeout:"",header["Content-Type"]=mimeType,header["Content-Length"]=function(n){for(var c,ret=0,len=n.length,i=0;i<len;i++)(c=n.charCodeAt(i))<128?ret++:ret+=127<c&&c<2048?2:3;return ret}(value),_ajax("POST",url,value,result,errorResult,noCache,header)}(url,"create-file",_setExpireHeaders(_getAuthHeader(),expire),value,noCache,timeout,result,errorResult)},o.getFile=function(url,result,errorResult,noCache,timeout){noCache||(noCache=!1),_sendGet(url,"get-file",{},null,noCache,timeout,result,errorResult)},o.removeFile=function(url,result,errorResult,noCache,timeout){_sendGet(url,"remove-file",_getAuthHeader(),null,noCache,timeout,result,errorResult)},o.getList=function(url,result,errorResult,noCache,timeout){_sendGet(url,"list",_getAuthHeader(),null,noCache,timeout,result,errorResult)},o.isFile=function(url,result,errorResult,noCache,timeout){_sendGet(url,"is-file",_getAuthHeader(),null,noCache,timeout,result,errorResult)},o.setExpire=function(url,expire,result,errorResult,noCache,timeout){_sendGet(url,"set-expire",_setExpireHeaders(_getAuthHeader(),expire),null,noCache,timeout,result,errorResult)},o.getExpire=function(url,result,errorResult,noCache,timeout){_sendGet(url,"get-expire",_getAuthHeader(),null,noCache,timeout,result,errorResult)},o.isFolder=function(url,result,errorResult,noCache,timeout){_sendGet(url,"is-folder",_getAuthHeader(),null,noCache,timeout,result,errorResult)},o.isLock=function(url,result,errorResult,noCache,timeout){_sendGet(url,"is-lock",_getAuthHeader(),null,noCache,timeout,result,errorResult)},o.forcedLock=function(url,result,errorResult,noCache,timeout){_sendGet(url,"forced-lock",_getAuthHeader(),null,noCache,timeout,result,errorResult)};var admin={};o.admin=admin;function _getAuthAdminAcccessCodeHeader(expire){var ret={};return ret["x-uaccess-admin-access-signatures"]=function(expire){var passCode=_cboxPassCode;passCode=""==passCode?_UACCESS_ADMIN_ACCESS_CODE_KEYCODE:fcipher.fhash(passCode),(expire|=0)<=0&&(expire=_uaccessExpire);var key=fcipher.key(passCode,_cboxServerUUID),src='{"expire": '+(Date.now()+expire)+"}";return fcipher.enc(src,key,"_uaccess_admin_access")}(expire),ret}var _cboxServerUUID="0",_cboxPassCode="";admin.setAuthInfo=function(uuid,passCode){!function(uuid,passCode){_cboxServerUUID=uuid,_cboxPassCode=passCode}(uuid,passCode)};admin.create=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"create_admin_code",_getAuthAdminAcccessCodeHeader(),null,noCache,timeout,result,errorResult)},admin.remove=function(url,removeCode,result,errorResult,noCache,timeout){_sendUaccess(url,"remove_admin_code",_getAuthAdminAcccessCodeHeader(),removeCode,noCache,timeout,result,errorResult)},admin.list=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"get_list_admin_code",_getAuthAdminAcccessCodeHeader(),null,noCache,timeout,result,errorResult)},admin.getFirst=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"get_admin_code",_getAuthAdminAcccessCodeHeader(),null,noCache,timeout,result,errorResult)},admin.removeLast=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"remove_old_admin_code",_getAuthAdminAcccessCodeHeader(),null,noCache,timeout,result,errorResult)};var security={};o.security=security;security.create=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"create_security_code",_getAuthAdminAcccessCodeHeader(),null,noCache,timeout,result,errorResult)},security.remove=function(url,removeCode,result,errorResult,noCache,timeout){_sendUaccess(url,"remove_security_code",_getAuthAdminAcccessCodeHeader(),removeCode,noCache,timeout,result,errorResult)},security.list=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"get_list_security_code",_getAuthAdminAcccessCodeHeader(),null,noCache,timeout,result,errorResult)},security.getFirst=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"get_security_code",_getAuthAdminAcccessCodeHeader(),null,noCache,timeout,result,errorResult)},security.removeLast=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"remove_old_security_code",_getAuthAdminAcccessCodeHeader(),null,noCache,timeout,result,errorResult)};var account={};o.account=account;function _getAuthAdminCodeHeader(name,expire){if(!name||""==name)throw new Error("アカウント名が設定されていません");var ret={};return ret["x-uaccess-admin-signatures"]=function(name,expire){var passCode=_cboxPassCode;passCode=""==passCode?_UACCESS_ADMIN_CODE_KEYCODE:fcipher.fhash(passCode),(expire|=0)<=0&&(expire=_uaccessExpire);var key=fcipher.key(passCode,name),src='{"adminCode": "'+_uaccessAdminCode+'", "expire": '+(Date.now()+expire)+"}";return fcipher.enc(src,key,"_uaccess_admin_")}(name,expire),ret}function _getUrlByAccount(name){var p=name.indexOf("://");if(-1!=p){if(-1==(p=name.indexOf("/",p+3)))throw new Error("URLからアカウント情報の取得に失敗しました");p=name.indexOf("/",p),name=name.substring(p+1)}else p=name.indexOf("/");return 0==p&&-1==(p=(name=name.substring(1)).indexOf("/",1))?name:name.substring(0,p)}var _uaccessAdminCode="c";account.setAuthInfo=function(adminCode){!function(adminCode){_uaccessAdminCode=adminCode}(adminCode)};account.create=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"create_account_code",_getAuthAdminCodeHeader(_getUrlByAccount(url)),null,noCache,timeout,result,errorResult)},account.remove=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"remove_account_code",_getAuthAdminCodeHeader(_getUrlByAccount(url)),null,noCache,timeout,result,errorResult)},account.get=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"get_account_code",_getAuthAdminCodeHeader(_getUrlByAccount(url)),null,noCache,timeout,result,errorResult)},account.list=function(result,errorResult,noCache,timeout){_sendUaccess("*","list_account_code",_getAuthAdminCodeHeader("*"),null,noCache,timeout,result,errorResult)},account.isAccount=function(url,result,errorResult,noCache,timeout){_sendUaccess(url,"is_account_code",_getAuthAdminCodeHeader(_getUrlByAccount(url)),null,noCache,timeout,result,errorResult)},_g.cbox=o}(global);